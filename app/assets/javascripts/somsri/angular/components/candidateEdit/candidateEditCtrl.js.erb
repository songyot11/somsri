(function() {
  'use strict';
  angular.module('somsri.somsri.candidateEdit', [])
  .controller('candidateEditCtrl', ['$scope', '$rootScope', 'candidateEditService', '$state', function($scope, $rootScope, candidateEditService, $state) {
    var ctrl = this;
    ctrl.files = [{ file: "" }]
    var imagefile;


    $rootScope.loadAndAuthorizeResource("candidateEdit", function(){
      candidateEditService.getCandidate($state.params.id).then(function(resp) {
        ctrl.data = resp;
        console.log(resp);
      });

    ctrl.submit = function(parm){
    candidateEditService.saveCandidate(ctrl.data.candidate.id, parm).then(function(resp){
            console.log('Update complete!'); 
      });
  };


$scope.point = [
    { 'id': 1, 'value' : '1' },{ 'id': 2, 'value' : '2' },{ 'id': 3, 'value' : '3' },{ 'id': 4, 'value' : '4' },
    { 'id': 5, 'value' : '5' },{ 'id': 6, 'value' : '6' },{ 'id': 7, 'value' : '7' },{ 'id': 8, 'value' : '8' },
    { 'id': 9, 'value' : '9' },{ 'id': 10, 'value' : '10' },
    { 'id': 11, 'value' : '11' },{ 'id': 12, 'value' : '12' },{ 'id': 13, 'value' : '13' },{ 'id': 14, 'value' : '14' },
    { 'id': 15, 'value' : '15' },{ 'id': 16, 'value' : '16' },{ 'id': 17, 'value' : '17' },{ 'id': 18, 'value' : '18' },
    { 'id': 19, 'value' : '19' },{ 'id': 20, 'value' : '20' }
    ];

 ctrl.uploadPhoto = function() {
  candidateEditService.uploadImage(ctrl.data.candidate.id, imagefile).then(function(resp) {
    console.log('Upload Success!');
  });
  }


ctrl.showImage = function(event, id){
  console.log(event.target.files[0]);
  var img = URL.createObjectURL(event.target.files[0]);
  $('#' + id).attr('src', img);
  imagefile = event.target.files[0];
}

ctrl.addFile = function(){
   ctrl.files.push({ file: "" });
   console.log(ctrl.files)
}


    });

  }]);
})();
